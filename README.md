**Пирамида тестирования**

![alt text](image.png)

*Модульное тестиорвание (Unit test)* 
- это тесты, которые проверяют работу какого-то одного модуля, функции, то есть очень маленького компонента, который не связан с самим приложением.

*Инреграционные тесты* 
- это тесты, которые проверяют взаимодействие между модулями. Для них обычно нужна инфоструктура БД, например.

*Сквозные тесты* 
- это тесты, которые проверяют работу всего приложения в целом и проходят полностью весь путь от регистрации до оформления заказа, например. 

*Параметризация тестов*  
- это запуск одного и того же теста с различными наборами параметров. Это полезно, когда нужно проверить одну и ту же функциональность с разными входными данными. 

Пример параметризации:
```
@pytest.mark.parametrize("x, y, res", 
                        [(1, 2, 0.5), (4, 2, 2), (5, -1, -5)])
def test_divide(x, y, res):
    assert Calculator().divide(x, y) == res
```
Запустить конкретный тест:
```
(venv) roman@RomanPC:~/Рабочий стол/pytest$ pytest tests/test_main.py::test_divide[1-2-0.5]
```

Для группировки тестов по какому либо призноку используем классы.
Чтобы запустить конкретный класс с тестами мы используем:
```
(venv) roman@RomanPC:~/Рабочий стол/pytest$ pytest tests/test_main.py::TestCalc
```
Для обработки ошибок мы используем:

```
from contextlib import nullcontext as does_not_raise
@pytest.mark.parametrize(
    "x, y, res, expectation", [
        (1, 2, 0.5, does_not_raise()), 
        (4, 2, 2, does_not_raise()), 
        (5, "-1", -5, pytest.raises(TypeError))
    ])
def test_divide(self, x, y, res, expectation):
    with expectation:
        assert Calculator().divide(x, y) == res
```